{"version":3,"sources":["webpack:///static/js/10.8e0f6f5d.chunk.js","webpack:///./src/components/checker/Checker.css","webpack:///./src/components/checker/Checker.css?56f2","webpack:///./src/components/checker/Checker.jsx"],"names":["webpackJsonp","376","module","exports","__webpack_require__","push","id","393","content","locals","747","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","done","length","err","Array","isArray","_createClass","defineProperties","target","props","descriptor","key","protoProps","staticProps","_react","_react2","_family","_utils","_constant","_mockjs","_mockjs2","Checker","_Component","this","_this","getPrototypeOf","switchMod","e","mod","preventDefault","setState","switchItf","itf","handleRequest","_this$state$itf","state","repositoryId","method","url","proxy","requests","fetch","then","res","json","Promise","all","_ref","_ref2","schema","data","_Mock$valid","valid","Diff","Assert","nextMatch","match","type","path","actual","expected","result","message","eval","diff","console","log","warn","_this2","repository","fetching","createElement","Spin","modules","interfaces","className","map","item","Link","to","onClick","name","onChange","serve","JSON","stringify","nextProps","_this3","Component","contextTypes","store","PropTypes","object","isRequired","propTypes","mapStateToProps","auth","mapDispatchToProps","connect"],"mappings":"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","file":"static/js/10.8e0f6f5d.chunk.js","sourcesContent":["webpackJsonp([10],{\n\n/***/ 376:\n/***/ function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(15)();\n\t// imports\n\t\n\t\n\t// module\n\texports.push([module.id, \".Checker{padding:2rem}.Checker .card-itfs .card-title,.Checker .card-mods .card-title{float:left;width:5rem;font-size:1.4rem}.Checker .card-itfs a,.Checker .card-mods a{float:left;margin-right:1rem;width:10rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:#666}.Checker .card-itfs a.active,.Checker .card-mods a.active{color:#4a7bf7}.Checker .card-result{margin-top:1rem}.Checker .card-result .card-title{font-size:1.4rem;margin-bottom:1rem}\", \"\"]);\n\t\n\t// exports\n\n\n/***/ },\n\n/***/ 393:\n/***/ function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\t\n\t// load the styles\n\tvar content = __webpack_require__(376);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(16)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js?importLoaders=1!../../../node_modules/postcss-loader/index.js!./Checker.css\", function() {\n\t\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js?importLoaders=1!../../../node_modules/postcss-loader/index.js!./Checker.css\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ },\n\n/***/ 747:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _family = __webpack_require__(5);\n\t\n\tvar _utils = __webpack_require__(6);\n\t\n\tvar _constant = __webpack_require__(24);\n\t\n\tvar _mockjs = __webpack_require__(23);\n\t\n\tvar _mockjs2 = _interopRequireDefault(_mockjs);\n\t\n\t__webpack_require__(393);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Checker = function (_Component) {\n\t  _inherits(Checker, _Component);\n\t\n\t  function Checker(props) {\n\t    _classCallCheck(this, Checker);\n\t\n\t    var _this = _possibleConstructorReturn(this, (Checker.__proto__ || Object.getPrototypeOf(Checker)).call(this, props));\n\t\n\t    _this.switchMod = function (e, mod) {\n\t      e.preventDefault();\n\t      _this.setState({ mod: mod });\n\t    };\n\t\n\t    _this.switchItf = function (e, itf) {\n\t      e.preventDefault();\n\t      _this.setState({ itf: itf }, function () {\n\t        _this.handleRequest();\n\t      });\n\t    };\n\t\n\t    _this.handleRequest = function () {\n\t      var _this$state$itf = _this.state.itf,\n\t          repositoryId = _this$state$itf.repositoryId,\n\t          method = _this$state$itf.method,\n\t          url = _this$state$itf.url;\n\t\n\t      var target = _this.state.target + '/app/mock/' + repositoryId + '/' + method + '/' + url;\n\t      var proxy = _constant.serve + '/proxy?target=' + target;\n\t      var requests = [fetch(_constant.serve + '/app/mock/schema/' + _this.state.itf.id).then(function (res) {\n\t        return res.json();\n\t      }), fetch(proxy).then(function (res) {\n\t        return res.json();\n\t      })];\n\t      Promise.all(requests).then(function (_ref) {\n\t        var _ref2 = _slicedToArray(_ref, 2),\n\t            schema = _ref2[0],\n\t            data = _ref2[1];\n\t\n\t        var _Mock$valid = _mockjs2.default.valid,\n\t            Diff = _Mock$valid.Diff,\n\t            Assert = _Mock$valid.Assert;\n\t\n\t        var nextMatch = Assert.match;\n\t        Assert.match = function (type, path, actual, expected, result, message) {\n\t          if (typeof expected === 'string') expected = eval('(' + expected + ')'); // eslint-disable-line no-eval\n\t          nextMatch(type, path, actual, expected, result, message);\n\t        };\n\t        var result = Diff.diff(schema, data);\n\t        console.log(result);\n\t        for (var i = 0; i < result.length; i++) {\n\t          console.warn(Assert.message(result[i]));\n\t        }\n\t      });\n\t    };\n\t\n\t    _this.state = {\n\t      mod: null,\n\t      itf: null,\n\t      target: _constant.serve\n\t    };\n\t    return _this;\n\t  }\n\t\n\t  _createClass(Checker, [{\n\t    key: 'render',\n\t    value: function render() {\n\t      var _this2 = this;\n\t\n\t      var repository = this.props.repository;\n\t\n\t      if (repository.fetching) return _react2.default.createElement(_utils.Spin, null);\n\t\n\t      repository = repository.data;\n\t      var mod = this.state.mod || repository.modules[0];\n\t      var itf = this.state.itf || mod.interfaces[0];\n\t      return _react2.default.createElement(\n\t        'section',\n\t        { className: 'Checker' },\n\t        _react2.default.createElement(\n\t          'div',\n\t          { className: 'card-mods clearfix' },\n\t          _react2.default.createElement(\n\t            'span',\n\t            { className: 'card-title' },\n\t            '\\u6A21\\u5757\\uFF1A'\n\t          ),\n\t          repository.modules.map(function (item) {\n\t            return _react2.default.createElement(\n\t              _family.Link,\n\t              { key: item.id, to: '', onClick: function onClick(e) {\n\t                  return _this2.switchMod(e, item);\n\t                }, className: item.id === mod.id ? 'active' : '' },\n\t              item.name\n\t            );\n\t          })\n\t        ),\n\t        _react2.default.createElement(\n\t          'div',\n\t          { className: 'card-itfs clearfix' },\n\t          _react2.default.createElement(\n\t            'span',\n\t            { className: 'card-title' },\n\t            '\\u63A5\\u53E3\\uFF1A'\n\t          ),\n\t          mod.interfaces.map(function (item) {\n\t            return _react2.default.createElement(\n\t              _family.Link,\n\t              { key: item.id, to: '', onClick: function onClick(e) {\n\t                  return _this2.switchItf(e, item);\n\t                }, className: item.id === itf.id ? 'active' : '' },\n\t              item.name\n\t            );\n\t          })\n\t        ),\n\t        _react2.default.createElement(\n\t          'div',\n\t          null,\n\t          _react2.default.createElement('input', { value: this.state.target, onChange: function onChange(e) {\n\t              return _this2.setState({ target: e.target.value });\n\t            }, className: 'form-control' })\n\t        ),\n\t        _react2.default.createElement(\n\t          'div',\n\t          { className: 'card-result' },\n\t          _react2.default.createElement(\n\t            'div',\n\t            { className: 'card-title' },\n\t            _constant.serve + '/app/mock/data/' + itf.id\n\t          ),\n\t          _react2.default.createElement(\n\t            'pre',\n\t            null,\n\t            JSON.stringify(this.state.result, null, 2)\n\t          )\n\t        )\n\t      );\n\t    }\n\t  }, {\n\t    key: 'componentWillReceiveProps',\n\t    value: function componentWillReceiveProps(nextProps) {\n\t      var _this3 = this;\n\t\n\t      var repository = nextProps.repository;\n\t\n\t      repository = repository.data;\n\t      if (!repository.id) return;\n\t      var mod = this.state.mod || repository.modules[0];\n\t      var itf = this.state.itf || mod.interfaces[0];\n\t      fetch(_constant.serve + '/app/mock/data/' + itf.id).then(function (res) {\n\t        return res.json();\n\t      }).then(function (json) {\n\t        _this3.setState({ result: json });\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return Checker;\n\t}(_react.Component);\n\t// 容器组件\n\t\n\t\n\tChecker.contextTypes = {\n\t  store: _family.PropTypes.object.isRequired\n\t};\n\tChecker.propTypes = {\n\t  repository: _family.PropTypes.object.isRequired\n\t};\n\tvar mapStateToProps = function mapStateToProps(state) {\n\t  return {\n\t    auth: state.auth,\n\t    repository: state.repository\n\t  };\n\t};\n\tvar mapDispatchToProps = {};\n\texports.default = (0, _family.connect)(mapStateToProps, mapDispatchToProps)(Checker);\n\n/***/ }\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/10.8e0f6f5d.chunk.js","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".Checker{padding:2rem}.Checker .card-itfs .card-title,.Checker .card-mods .card-title{float:left;width:5rem;font-size:1.4rem}.Checker .card-itfs a,.Checker .card-mods a{float:left;margin-right:1rem;width:10rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:#666}.Checker .card-itfs a.active,.Checker .card-mods a.active{color:#4a7bf7}.Checker .card-result{margin-top:1rem}.Checker .card-result .card-title{font-size:1.4rem;margin-bottom:1rem}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?importLoaders=1!./~/postcss-loader!./src/components/checker/Checker.css\n// module id = 376\n// module chunks = 10","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?importLoaders=1!../../../node_modules/postcss-loader/index.js!./Checker.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js?importLoaders=1!../../../node_modules/postcss-loader/index.js!./Checker.css\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js?importLoaders=1!../../../node_modules/postcss-loader/index.js!./Checker.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/checker/Checker.css\n// module id = 393\n// module chunks = 10","import React, { Component } from 'react'\r\nimport { PropTypes, connect, Link } from '../../family'\r\nimport { Spin } from '../utils'\r\nimport { serve } from '../../relatives/services/constant'\r\nimport Mock from 'mockjs'\r\nimport './Checker.css'\r\n\r\nclass Checker extends Component {\r\n  static contextTypes = {\r\n    store: PropTypes.object.isRequired\r\n  }\r\n  static propTypes = {\r\n    repository: PropTypes.object.isRequired\r\n  }\r\n  constructor (props) {\r\n    super(props)\r\n    this.state = {\r\n      mod: null,\r\n      itf: null,\r\n      target: serve\r\n    }\r\n  }\r\n  render () {\r\n    let { repository } = this.props\r\n    if (repository.fetching) return <Spin />\r\n\r\n    repository = repository.data\r\n    let mod = this.state.mod || repository.modules[0]\r\n    let itf = this.state.itf || mod.interfaces[0]\r\n    return (\r\n      <section className='Checker'>\r\n        <div className='card-mods clearfix'>\r\n          <span className='card-title'>模块：</span>\r\n          {repository.modules.map(item =>\r\n            <Link key={item.id} to='' onClick={e => this.switchMod(e, item)} className={item.id === mod.id ? 'active' : ''}>{item.name}</Link>\r\n          )}\r\n        </div>\r\n        <div className='card-itfs clearfix'>\r\n          <span className='card-title'>接口：</span>\r\n          {mod.interfaces.map(item =>\r\n            <Link key={item.id} to='' onClick={e => this.switchItf(e, item)} className={item.id === itf.id ? 'active' : ''}>{item.name}</Link>\r\n          )}\r\n        </div>\r\n        <div>\r\n          <input value={this.state.target} onChange={e => this.setState({ target: e.target.value })} className='form-control' />\r\n        </div>\r\n        <div className='card-result'>\r\n          <div className='card-title'>{`${serve}/app/mock/data/${itf.id}`}</div>\r\n          <pre>{JSON.stringify(this.state.result, null, 2)}</pre>\r\n        </div>\r\n      </section>\r\n    )\r\n  }\r\n  componentWillReceiveProps (nextProps) {\r\n    let { repository } = nextProps\r\n    repository = repository.data\r\n    if (!repository.id) return\r\n    let mod = this.state.mod || repository.modules[0]\r\n    let itf = this.state.itf || mod.interfaces[0]\r\n    fetch(`${serve}/app/mock/data/${itf.id}`)\r\n      .then(res => res.json())\r\n      .then(json => {\r\n        this.setState({ result: json })\r\n      })\r\n  }\r\n  switchMod = (e, mod) => {\r\n    e.preventDefault()\r\n    this.setState({ mod })\r\n  }\r\n  switchItf = (e, itf) => {\r\n    e.preventDefault()\r\n    this.setState({ itf }, () => {\r\n      this.handleRequest()\r\n    })\r\n  }\r\n  handleRequest = () => {\r\n    let { repositoryId, method, url } = this.state.itf\r\n    let target = `${this.state.target}/app/mock/${repositoryId}/${method}/${url}`\r\n    let proxy = `${serve}/proxy?target=${target}`\r\n    let requests = [\r\n      fetch(`${serve}/app/mock/schema/${this.state.itf.id}`).then(res => res.json()),\r\n      fetch(proxy).then(res => res.json())\r\n    ]\r\n    Promise.all(requests).then(([schema, data]) => {\r\n      let { Diff, Assert } = Mock.valid\r\n      let nextMatch = Assert.match\r\n      Assert.match = function (type, path, actual, expected, result, message) {\r\n        if (typeof expected === 'string') expected = eval('(' + expected + ')') // eslint-disable-line no-eval\r\n        nextMatch(type, path, actual, expected, result, message)\r\n      }\r\n      var result = Diff.diff(schema, data)\r\n      console.log(result)\r\n      for (var i = 0; i < result.length; i++) {\r\n        console.warn(Assert.message(result[i]))\r\n      }\r\n    })\r\n  }\r\n}\r\n// 容器组件\r\nconst mapStateToProps = (state) => ({\r\n  auth: state.auth,\r\n  repository: state.repository\r\n})\r\nconst mapDispatchToProps = ({})\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Checker)\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/checker/Checker.jsx"],"sourceRoot":""}